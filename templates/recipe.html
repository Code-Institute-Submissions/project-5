{% extends "base.html" %}

{% block css %}
<style>
	hr {
		margin: 30px 0px;
	}

	.list-group-item {
		padding: .35rem 1.25rem;
	}

	.col-xs-12 {
		margin: 15px 0px;
	}
</style>
{% endblock css %}

{% block main_content %}

{% set recipes = recipe.recipes[0] %}

<section class="vh100 container">
	<div class="row">
		<div class="container">
			<div class="row">
				<h2 class=" col-12 text-center">{{recipes.title|title}} 
					<button onclick="return print_recipe('{{recipe._id}}')" class="btn btn-light"><i class="fas fa-print"></i>
					</button>
				</h2>
			</div>
			<hr>
			<div class="row">
				<div class="col-xs-12 col-md-6">
					<div class="row">
						<div class="col-12">
							<img class="card-img-top" src="{{ recipes.image }}" alt="{{recipes.title}}">
							<hr>
						</div>
						{% if session %}
						<div class="col-12">
							<div class="row justify-content-around">
								<div class="col-4">
									<button class="btn btn-outline-success"><i class="fas fa-thumbs-up"></i></button>
								</div>
								<div class="col-4">
									<p><i class="fas fa-star fa-lg"></i> {{ recipes.aggregateLikes }}</p>
								</div>
								<div class="col-4">
									<button class="btn btn-outline-danger"><i class="fas fa-thumbs-up fa-rotate-180"></i></button>
								</div>
							</div>
						</div>
						{% else %}
						<div class="col-12 text-center">
							<p>You must be loged in to vote / edit recipes</p>
							<p><i class="fas fa-star fa-lg"></i> {{ recipes.aggregateLikes }}</p>
						</div>
						{% endif %}
					</div>
				</div>
				<div class="col-xs-12 col-md-6">
					<p class="card-text"></p><a href="{{url_for('search_by_time')}}"><i class="fas fa-clock"></i> {{
						recipes.readyInMinutes }} min</a>
					</p>
					<ul class="list-group list-group-flush">
						{% for ingredient in recipes.extendedIngredients %}
						<li class="list-group-item">
							{{ingredient.original|title}}
						</li>
						{% endfor %}
					</ul>
				</div>
			</div>
			<hr>
		</div>
		<div class="container">
			<div class="row">
				<h3 class="col-12 text-center">Steps</h3>
				<div class="col-xs-12">
					<ol>
						{% set list = recipes.analyzedInstructions[0].steps %}
						{% for dic in list %}
						<li>{{dic.step}}</li>
						{% endfor %}
					</ol>
				</div>
			</div>
		</div>
	</div>
	{% if recipes.winePairing %}
	<hr>
	<div class="row">
		<h3 class="col-12 text-center">Wine pairing</h3>
		<div class="col-xs-12 text-center">
			<p>{{recipes.winePairing.pairingText}}</p>
		</div>

	</div>
	{% endif %}
	<hr>
	<h6 class="text-center">Credits: {{recipes.creditsText}}</h6>
	<hr>
	<h6 class="text-center"> Recipe tags </h6>
	<div class="row justify-content-center">			
		{% set recipe = recipe.recipes[0] %}
		{% if recipe.dishTypes[0] %}
		<ul class="list-inline">
			{% for type in recipe.dishTypes %}
			<li class="list-inline-item">
				<a class="tags" href="{{url_for('search_by_type', dish_type=type)}}">{{ type|title }}</a>
			</li>
			{% endfor %}
		</ul>
		{% endif %}
		{% if recipe.cuisines[0] %}
		<ul class="list-inline">
			{% for cuisine in recipe.cuisines %}
			<li class="list-inline-item">
				<a class="tags" href="{{url_for('search_by_cuisines', cuisine=cuisine)}}">{{ cuisine|title }}</a>
			</li>
			{% endfor %}
		</ul>
		{% endif %}
		{% if recipe.diets[0] %}
		<ul class="list-inline">
			{% for diet in recipe.diets %}
			<li class="list-inline-item">
				<a class="tags" href="{{url_for('search_by_diet', diet_type=diet)}}">{{ diet|title }}</a>
			</li>
			{% endfor %}
		</ul>
		{% endif %}
	</div>
	{% if user_in_db %}
	{% for id in user_in_db.recipes %}
	{% if id == recipe_id %}
	<div class="row justify-content-center">
		<a class="color-red" href="{{url_for('edit_recipe', recipe_id=recipe_id, user_id=user_in_db._id)}}">Edit recipe</a>
	</div>
	{% endif %}
	{% endfor %}
	{% endif %}
</section>

{% endblock main_content %}